import{r as a}from"./index.DhYZZe0J.js";var j={exports:{}},m={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y=a,S=Symbol.for("react.element"),_=Symbol.for("react.fragment"),R=Object.prototype.hasOwnProperty,g=y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,w={key:!0,ref:!0,__self:!0,__source:!0};function b(r,n,s){var t,o={},l=null,i=null;s!==void 0&&(l=""+s),n.key!==void 0&&(l=""+n.key),n.ref!==void 0&&(i=n.ref);for(t in n)R.call(n,t)&&!w.hasOwnProperty(t)&&(o[t]=n[t]);if(r&&r.defaultProps)for(t in n=r.defaultProps,n)o[t]===void 0&&(o[t]=n[t]);return{$$typeof:S,type:r,key:l,ref:i,props:o,_owner:g.current}}m.Fragment=_;m.jsx=b;m.jsxs=b;j.exports=m;var e=j.exports;const E="https://www.omdbapi.com/?apikey=9fd8252e&s=all",k="https://www.omdbapi.com/?apikey=9fd8252e&s=",N="False",O=[],C={Response:N,Search:O,Error:"Too many results."};function M(r){return r?.map(s=>({id:s.imdbID,title:s.Title,poster:s.Poster,year:s.Year}))}async function v(r){const s=await(await fetch(r)).json();if(s.Response==="False")return{datamovies:C};{const t=s.Search,o=M(t);return console.log(o),{datamovies:o}}}function F({search:r,sort:n}){const[s,t]=a.useState([]),o=a.useRef(r),[l,i]=a.useState(!1);a.useEffect(()=>{i(!1),v(E).then(c=>{const{datamovies:u}=c;t(u),i(!0)})},[]);const d=a.useCallback(({search:c})=>{o.current!==c&&c&&(o.current=c,v(`${k}${c}`).then(u=>{const{datamovies:f}=u;t(f)}))},[]);return{movies:a.useMemo(()=>n?[...s].sort((c,u)=>c.title.localeCompare(u.title)):s,[n,s]),getMovie:d,loader:l}}function T(){const[r,n]=a.useState(""),[s,t]=a.useState(null),o=a.useRef(!0);return a.useEffect(()=>{if(o.current){o.current=r==="";return}if(!r.startsWith(" ")){if(r.match(/^\d+/)){t("no se puede buscar peliculas con un numero");return}if(r.length<3){t("la palabre debe tener 3 letras o mas");return}t("")}},[r]),{search:r,updateSearch:n,error:s}}var I=L;function L(r,n,s){var t=null,o=null,l=function(){t&&(clearTimeout(t),o=null,t=null)},i=function(){var p=o;l(),p&&p()},d=function(){if(!n)return r.apply(this,arguments);var p=this,c=arguments,u=s&&!t;if(l(),o=function(){r.apply(p,c)},t=setTimeout(function(){if(t=null,!u){var f=o;return o=null,f()}},n),u)return o()};return d.cancel=l,d.flush=i,d}function P({data:r}){const{poster:n,title:s,year:t}=r;return e.jsxs("ul",{className:"movie",children:[e.jsx("li",{children:e.jsx("picture",{children:e.jsx("img",{src:n,alt:s})})}),e.jsx("li",{children:e.jsx("h3",{children:s})}),e.jsx("li",{children:e.jsx("p",{children:t})})]})}function D({movies:r}){return e.jsx(e.Fragment,{children:e.jsx("section",{children:e.jsx("div",{className:"movies",children:r?.map(n=>e.jsx(P,{data:n},n.id))})})})}function A(){return e.jsx("h2",{children:"No se encontraron peliculas con ese nombre"})}function U({movies:r}){const n=r.length>0;return e.jsx(e.Fragment,{children:n?e.jsx(D,{movies:r}):e.jsx(A,{})})}function B(){const{search:r,updateSearch:n,error:s}=T(),[t,o]=a.useState(!1),{movies:l,getMovie:i,loader:d}=F({search:r,sort:t}),p=a.useCallback(I(h=>{i({search:h})},500),[]),c=h=>{const x=h.target.value;n(x),p(x)},u=h=>{h.preventDefault(),i({search:r})},f=()=>{o(!t)};return e.jsxs("section",{children:[e.jsxs("header",{children:[e.jsx("h1",{children:"Buscador de peliculas"}),e.jsxs("form",{className:"form",onSubmit:u,children:[e.jsxs("div",{children:[e.jsx("input",{name:"query",onChange:c,value:r,placeholder:"ingresa la pelicula a buscar"}),e.jsx("button",{type:"submit",children:"Buscar"})]}),e.jsxs("div",{children:[e.jsx("input",{name:"order",onChange:f,type:"checkbox"}),e.jsx("label",{htmlFor:"order",children:"Ordenar"})]})]}),s&&e.jsx("p",{style:{color:"red"},children:s})]}),e.jsx("main",{children:d?e.jsx(U,{movies:l}):e.jsx("span",{className:"loader"})})]})}export{B as default};
